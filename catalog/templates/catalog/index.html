{% extends "main.html" %}

{% block content %}
<div class="pt-16 pb-16 bg-gray-50">
    <h1 class="text-4xl font-bold mb-8 text-center text-amber-600">Our Collection</h1>

    <!-- Category Buttons -->
    <div class="flex flex-wrap justify-center gap-4 mb-10">
        <a href="{% url 'catalog:index'  %}" class="category-btn px-5 py-2 rounded-full border font-medium text-sm bg-white text-amber-600 border-amber-300 hover:bg-amber-100" data-category="All">
            All
        </a>
        {% for cat in categories %}
        <a href="{% url 'catalog:index'  %}?category_slug={{ cat.slug }}" class="category-btn px-5 py-2 rounded-full border font-medium text-sm {% if cat == 'All' %}bg-amber-500 text-white border-amber-500{% else %}bg-white text-amber-600 border-amber-300 hover:bg-amber-100{% endif %}" data-category="{{ cat }}">
            {{ cat }}
        </a>
        {% endfor %}
    </div>

    <!-- Products Grid -->
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">
        {% if products %}
            {% for product in products %}
                {% include "components/product_card.html" %}
            {% endfor %}
        {% else %}
            <p class="col-span-full text-center text-gray-500">No products found.</p>
        {% endif %}
    </div>

    <script>
        {% comment %} const buttons = document.querySelectorAll('.category-btn');
        const cards = document.querySelectorAll('.card');

        buttons.forEach(btn => {
            btn.addEventListener('click', () => {
                const category = btn.getAttribute('data-category');

                // Update active button style
                buttons.forEach(b => {
                    b.classList.remove('bg-amber-500','text-white');
                    b.classList.add('bg-white','text-amber-600');
                });
                btn.classList.add('bg-amber-500','text-white');

                // Show/hide products
                cards.forEach(card => {
                    if(category === "All" || card.getAttribute('data-category') === category){
                        card.classList.remove('hidden');
                    } else {
                        card.classList.add('hidden');
                    }
                });
            });
        }); {% endcomment %}
    </script>

</div>

{% endblock content %}