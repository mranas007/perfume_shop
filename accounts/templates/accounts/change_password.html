{% extends 'main.html' %}
{% load form_tags %}

{% block content %}
<div class="max-w-md mx-auto min-h-screen py-8 px-2">
  <div class="bg-white rounded-2xl shadow-2xl overflow-hidden">
    <div class="bg-gradient-to-br from-amber-500 to-amber-600 px-8 py-8 text-center">
      <h1 class="text-3xl font-bold text-white">Change Password</h1>
      <p class="text-white text-opacity-90">Keep your account secure</p>
    </div>
    <div class="p-6 sm:p-8">
      <form method="post" class="space-y-6">
        {% csrf_token %}
        {% if messages %}
          <div class="space-y-2">
            {% for message in messages %}
              <div class="p-3 rounded-lg {% if message.tags == 'success' %}bg-green-50 text-green-700 border border-green-200{% else %}bg-red-50 text-red-700 border border-red-200{% endif %}">{{ message }}</div>
            {% endfor %}
          </div>
        {% endif %}

        <div class="group bg-gray-50 rounded-xl p-5 border border-gray-200 focus-within:ring-2 focus-within:ring-amber-500">
          <label class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2 block">Current password</label>
          {{ form.old_password|add_class:'w-full bg-transparent outline-none ring-0 border-0 p-0' }}
          {% if form.old_password.errors %}
            <p class="text-sm text-red-600 mt-2">{{ form.old_password.errors.0 }}</p>
          {% endif %}
        </div>

        <div class="group bg-gray-50 rounded-xl p-5 border border-gray-200 focus-within:ring-2 focus-within:ring-amber-500">
          <label class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2 block">New password</label>
          {{ form.new_password1|add_class:'w-full bg-transparent outline-none ring-0 border-0 p-0' }}
          {% if form.new_password1.errors %}
            <p class="text-sm text-red-600 mt-2">{{ form.new_password1.errors.0 }}</p>
          {% endif %}
        </div>

        <div class="group bg-gray-50 rounded-xl p-5 border border-gray-200 focus-within:ring-2 focus-within:ring-amber-500">
          <label class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2 block">Confirm new password</label>
          {{ form.new_password2|add_class:'w-full bg-transparent outline-none ring-0 border-0 p-0' }}
          {% if form.new_password2.errors %}
            <p class="text-sm text-red-600 mt-2">{{ form.new_password2.errors.0 }}</p>
          {% endif %}
        </div>

        <div class="flex gap-4 mt-2">
          <a href="{% url 'accounts:profile' %}" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold py-3 px-6 rounded-xl text-center">Cancel</a>
          <button type="submit" class="flex-1 bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-white font-semibold py-3 px-6 rounded-xl shadow-lg">Update Password</button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}

